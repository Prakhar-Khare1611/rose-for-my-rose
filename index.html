<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸŒ¹ Happy Rose Day My Love ğŸŒ¹</title>
<style>
/* ============================================================
   FONTS
   ============================================================ */
@import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;500;600;700&family=Quicksand:wght@300;400;500;600;700&family=Pacifico&family=Great+Vibes&display=swap');

/* ============================================================
   GLOBAL RESET
   ============================================================ */
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html,body{width:100%;height:100%;overflow:hidden;font-family:'Quicksand',sans-serif;user-select:none;-webkit-tap-highlight-color:transparent;background:#1a0a10}

/* ============================================================
   PARTICLE CANVAS
   ============================================================ */
#particleCanvas{position:fixed;inset:0;z-index:0;pointer-events:none}

/* ============================================================
   CURSOR TRAIL
   ============================================================ */
.cursor-heart{position:fixed;pointer-events:none;z-index:9999;font-size:1rem;animation:cursorFade 1s ease-out forwards}
@keyframes cursorFade{0%{opacity:1;transform:scale(1) translateY(0)}100%{opacity:0;transform:scale(0.3) translateY(-60px)}}

/* ============================================================
   FLOATING LAYER
   ============================================================ */
.floating-layer{position:fixed;inset:0;pointer-events:none;z-index:3;overflow:hidden}
.floater{position:absolute;animation-timing-function:linear;animation-iteration-count:infinite;pointer-events:none;will-change:transform,opacity}

.float-heart{animation-name:floatUp;opacity:0}
@keyframes floatUp{0%{transform:translateY(0) rotate(0deg) scale(1);opacity:0}8%{opacity:.7}80%{opacity:.5}100%{transform:translateY(-115vh) rotate(360deg) scale(.5);opacity:0}}

.float-balloon{animation-name:balloonRise;opacity:0}
@keyframes balloonRise{0%{transform:translateY(0) translateX(0) scale(1);opacity:0}6%{opacity:.85}50%{transform:translateY(-55vh) translateX(30px) scale(1.05)}100%{transform:translateY(-120vh) translateX(-20px) scale(.85);opacity:0}}

.float-sparkle{animation-name:sparklePop;opacity:0}
@keyframes sparklePop{0%,100%{opacity:0;transform:scale(0) rotate(0deg)}20%{opacity:1;transform:scale(1.3) rotate(90deg)}50%{opacity:.7;transform:scale(.8) rotate(180deg)}80%{opacity:1;transform:scale(1.1) rotate(270deg)}}

/* Petal drift */
.float-petal{animation-name:petalDrift;opacity:0}
@keyframes petalDrift{0%{transform:translateY(0) translateX(0) rotate(0deg);opacity:0}5%{opacity:.8}50%{transform:translateY(-50vh) translateX(40px) rotate(180deg);opacity:.6}100%{transform:translateY(-115vh) translateX(-30px) rotate(400deg);opacity:0}}

/* ============================================================
   PAGE SYSTEM
   ============================================================ */
.page{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:1;opacity:0;transform:scale(.9);pointer-events:none;transition:opacity 1s cubic-bezier(.4,0,.2,1),transform 1s cubic-bezier(.4,0,.2,1)}
.page.active{opacity:1;transform:scale(1);pointer-events:auto;z-index:2}

/* Page backgrounds */
#page1{background:linear-gradient(135deg,#ffe4ef 0%,#ffb6d3 35%,#ffc8dd 65%,#ffe0f0 100%)}
#page2{background:linear-gradient(135deg,#fce4ec 0%,#f8bbd0 30%,#f48fb1 70%,#fce4ec 100%)}
#page3{background:linear-gradient(135deg,#fff0f5 0%,#ffc1d6 40%,#ffacc7 70%,#ffe0ec 100%)}
#page4{background:linear-gradient(135deg,#fce4ec 0%,#f3a7c3 30%,#e8a0bf 60%,#fce4ec 100%)}

/* ============================================================
   GLOW CIRCLE
   ============================================================ */
.glow-circle{position:absolute;width:380px;height:380px;border-radius:50%;background:radial-gradient(circle,rgba(255,182,211,.45) 0%,transparent 70%);filter:blur(35px);animation:breatheGlow 4s ease-in-out infinite;pointer-events:none}
@keyframes breatheGlow{0%,100%{transform:scale(1);opacity:.45}50%{transform:scale(1.2);opacity:.8}}

/* ============================================================
   SHARED BUTTON
   ============================================================ */
.btn-magic{padding:15px 48px;border:none;border-radius:50px;font-family:'Quicksand',sans-serif;font-size:1.1rem;font-weight:700;color:#fff;background:linear-gradient(135deg,#f06292,#e91e63,#ec407a);box-shadow:0 6px 28px rgba(233,30,99,.35),0 0 0 0 rgba(233,30,99,.4);cursor:pointer;position:relative;overflow:hidden;transition:transform .25s,box-shadow .25s;animation:btnPulse 2.5s ease-in-out infinite;letter-spacing:.5px}
.btn-magic:hover{transform:translateY(-3px) scale(1.05);box-shadow:0 10px 36px rgba(233,30,99,.5)}
.btn-magic:active{transform:translateY(0) scale(.97)}
@keyframes btnPulse{0%,100%{box-shadow:0 6px 28px rgba(233,30,99,.35),0 0 0 0 rgba(233,30,99,.4)}50%{box-shadow:0 6px 28px rgba(233,30,99,.35),0 0 0 14px rgba(233,30,99,0)}}
.btn-magic::after{content:'';position:absolute;top:-50%;left:-70%;width:50%;height:200%;background:linear-gradient(105deg,transparent 38%,rgba(255,255,255,.3) 50%,transparent 62%);animation:shimmer 2.8s ease-in-out infinite}
@keyframes shimmer{0%{left:-70%}100%{left:170%}}

/* ============================================================
   PAGE 1 â€“ NAME ENTRY
   ============================================================ */
.board{position:relative;background:repeating-linear-gradient(90deg,rgba(0,0,0,.02) 0px,transparent 2px,transparent 20px),linear-gradient(170deg,#e8c992 0%,#cb9a58 25%,#b8843e 50%,#cb9a58 75%,#dfba7c 100%);border:7px solid #7a4f2a;border-radius:18px;padding:44px 52px 40px;box-shadow:0 14px 52px rgba(60,30,5,.4),inset 0 2px 10px rgba(255,255,255,.2),inset 0 -3px 10px rgba(0,0,0,.18);text-align:center;animation:boardFloat 5s ease-in-out infinite;max-width:92vw}
@keyframes boardFloat{0%,100%{transform:translateY(0) rotate(-.5deg)}50%{transform:translateY(-8px) rotate(.5deg)}}

.board::before,.board::after{content:'';position:absolute;top:-38px;width:3px;height:42px;background:linear-gradient(180deg,#7a5a32,#5c3d1e);border-radius:2px}
.board::before{left:28%;transform:rotate(-8deg)}
.board::after{right:28%;transform:rotate(8deg)}

.nail{position:absolute;width:15px;height:15px;border-radius:50%;background:radial-gradient(circle at 35% 35%,#d8d8d8,#777);box-shadow:inset 0 1px 3px rgba(255,255,255,.5),0 2px 4px rgba(0,0,0,.3)}
.nail-tl{top:11px;left:11px}.nail-tr{top:11px;right:11px}.nail-bl{bottom:11px;left:11px}.nail-br{bottom:11px;right:11px}

.board h1{font-family:'Pacifico',cursive;color:#4a1525;font-size:1.9rem;margin-bottom:6px;text-shadow:1px 1px 0 rgba(255,255,255,.25);line-height:1.35}
.board .sub{font-family:'Dancing Script',cursive;color:#6f2e45;font-size:1.2rem;margin-bottom:26px}

.input-name{width:270px;max-width:80vw;padding:14px 26px;border:3px solid #e8829e;border-radius:30px;font-family:'Quicksand',sans-serif;font-size:1.05rem;text-align:center;color:#b0275a;background:rgba(255,255,255,.93);outline:none;transition:border-color .3s,box-shadow .3s}
.input-name::placeholder{color:#e0a3b8}
.input-name:focus{border-color:#d81b60;box-shadow:0 0 0 6px rgba(216,27,96,.15)}
.input-name.shake{animation:inputShake .5s ease}
@keyframes inputShake{0%,100%{transform:translateX(0)}20%{transform:translateX(-10px)}40%{transform:translateX(10px)}60%{transform:translateX(-6px)}80%{transform:translateX(6px)}}

.board .btn-magic{margin-top:24px}

/* Rose vine decoration for board */
.board-vine{position:absolute;font-size:1.4rem;animation:vineWiggle 3s ease-in-out infinite}
@keyframes vineWiggle{0%,100%{transform:rotate(-5deg) scale(1)}50%{transform:rotate(5deg) scale(1.1)}}

/* ============================================================
   PAGE 2 â€“ CHOOSE A GIFT
   ============================================================ */
.p2-welcome{font-family:'Pacifico',cursive;font-size:1.6rem;color:#ad1457;margin-bottom:4px;animation:fadeSlideDown .8s ease both}
.p2-title{font-family:'Great Vibes',cursive;font-size:2.8rem;color:#880e4f;margin-bottom:6px;text-shadow:2px 3px 6px rgba(0,0,0,.08);animation:fadeSlideDown .8s ease .15s both}
.p2-sub{font-size:1.05rem;color:#b0275a;margin-bottom:38px;font-weight:600;animation:fadeSlideDown .8s ease .3s both}
@keyframes fadeSlideDown{0%{opacity:0;transform:translateY(-20px)}100%{opacity:1;transform:translateY(0)}}

.gifts-row{display:flex;gap:40px;flex-wrap:wrap;justify-content:center}

/* Gift wrap */
.gift-wrap{position:relative;width:140px;height:165px;cursor:pointer;animation:giftFloat 3s ease-in-out infinite}
.gift-wrap:nth-child(2){animation-delay:.7s}
.gift-wrap:nth-child(3){animation-delay:1.4s}
@keyframes giftFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-14px)}}
.gift-wrap:hover{animation:giftWiggle .5s ease}
@keyframes giftWiggle{0%{transform:rotate(0)}20%{transform:rotate(-7deg)}40%{transform:rotate(7deg)}60%{transform:rotate(-4deg)}80%{transform:rotate(4deg)}100%{transform:rotate(0)}}

.gift-box-body{position:absolute;bottom:0;width:100%;height:72%;border-radius:12px;box-shadow:0 8px 26px rgba(0,0,0,.2)}
.gift-box-lid{position:absolute;top:18%;left:-6%;width:112%;height:22%;border-radius:9px;z-index:2;box-shadow:0 4px 12px rgba(0,0,0,.14)}
.gift-ribbon-v{position:absolute;bottom:0;left:43%;width:14%;height:72%;z-index:1}
.gift-ribbon-h{position:absolute;top:51%;left:-6%;width:112%;height:13%;z-index:1}
.gift-bow{position:absolute;top:0;left:50%;transform:translateX(-50%);font-size:2.6rem;z-index:4;filter:drop-shadow(0 2px 5px rgba(0,0,0,.18))}
.gift-label{position:absolute;bottom:-30px;width:100%;text-align:center;font-weight:700;color:#880e4f;font-size:.88rem}

/* Gift sparkle effect */
.gift-sparkles{position:absolute;inset:-10px;pointer-events:none;z-index:5}
.gift-sparkles span{position:absolute;font-size:.7rem;animation:giftSparkle 1.5s ease-in-out infinite}
@keyframes giftSparkle{0%,100%{opacity:0;transform:scale(.5)}50%{opacity:1;transform:scale(1.2)}}

/* Color variants */
.g-red .gift-box-body{background:linear-gradient(145deg,#ef5350,#c62828)}.g-red .gift-box-lid{background:linear-gradient(145deg,#e57373,#d32f2f)}.g-red .gift-ribbon-v,.g-red .gift-ribbon-h{background:#ffd54f}
.g-pink .gift-box-body{background:linear-gradient(145deg,#f06292,#c2185b)}.g-pink .gift-box-lid{background:linear-gradient(145deg,#f48fb1,#d81b60)}.g-pink .gift-ribbon-v,.g-pink .gift-ribbon-h{background:#fff}
.g-purple .gift-box-body{background:linear-gradient(145deg,#ba68c8,#7b1fa2)}.g-purple .gift-box-lid{background:linear-gradient(145deg,#ce93d8,#8e24aa)}.g-purple .gift-ribbon-v,.g-purple .gift-ribbon-h{background:#ffd54f}

/* Burst */
.burst{position:fixed;border-radius:50%;pointer-events:none;z-index:50;animation:burstOut .7s ease-out forwards}
@keyframes burstOut{0%{opacity:1;transform:translate(0,0) scale(1)}100%{opacity:0;transform:var(--burst-to) scale(.2)}}

/* ============================================================
   PAGE 3 â€“ CAT WITH ROSE
   ============================================================ */
.cat-scene{text-align:center;position:relative;padding:20px}

.cat-glow{position:absolute;width:300px;height:300px;top:50%;left:50%;transform:translate(-50%,-55%);border-radius:50%;background:radial-gradient(circle,rgba(255,200,220,.6) 0%,transparent 70%);filter:blur(25px);animation:breatheGlow 3.5s ease-in-out infinite;pointer-events:none}

/* Cat drawn with CSS */
.cat-container{position:relative;width:200px;height:220px;margin:0 auto 10px;animation:catEnter .9s cubic-bezier(.34,1.8,.64,1) both}
@keyframes catEnter{0%{opacity:0;transform:translateY(120px) scale(.2) rotate(-15deg)}100%{opacity:1;transform:translateY(0) scale(1) rotate(0)}}

.cat-idle-wrap{animation:catBreathe 3s ease-in-out infinite;display:inline-block}
@keyframes catBreathe{0%,100%{transform:scale(1) rotate(-1deg)}50%{transform:scale(1.04) rotate(1deg)}}

/* Cat body */
.cat-body{width:120px;height:100px;background:linear-gradient(145deg,#ffa726,#fb8c00);border-radius:50% 50% 50% 50% / 60% 60% 40% 40%;position:relative;margin:40px auto 0;box-shadow:0 8px 20px rgba(0,0,0,.15)}

/* Cat head */
.cat-head{width:100px;height:85px;background:linear-gradient(145deg,#ffb74d,#ffa726);border-radius:50%;position:absolute;top:-50px;left:50%;transform:translateX(-50%);z-index:2;box-shadow:0 4px 15px rgba(0,0,0,.1)}

/* Cat ears */
.cat-ear{position:absolute;width:0;height:0;border-left:18px solid transparent;border-right:18px solid transparent;border-bottom:35px solid #ffa726;z-index:3}
.cat-ear-left{top:-70px;left:18%}
.cat-ear-right{top:-70px;right:18%}
.cat-ear-inner{position:absolute;width:0;height:0;border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:22px solid #ffcc80;z-index:4}
.cat-ear-inner-l{top:-65px;left:23%}
.cat-ear-inner-r{top:-65px;right:23%}

/* Cat eyes */
.cat-eyes{position:absolute;top:-30px;left:50%;transform:translateX(-50%);display:flex;gap:28px;z-index:5}
.cat-eye{width:18px;height:22px;background:#333;border-radius:50%;position:relative;animation:blink 4s ease-in-out infinite}
.cat-eye::after{content:'';position:absolute;width:6px;height:6px;background:#fff;border-radius:50%;top:4px;right:3px}
@keyframes blink{0%,96%,100%{transform:scaleY(1)}98%{transform:scaleY(.1)}}

/* Cat nose */
.cat-nose{position:absolute;top:-12px;left:50%;transform:translateX(-50%);width:10px;height:7px;background:#e65100;border-radius:50% 50% 50% 50% / 30% 30% 70% 70%;z-index:5}

/* Cat mouth */
.cat-mouth{position:absolute;top:-6px;left:50%;transform:translateX(-50%);z-index:5}
.cat-mouth::before,.cat-mouth::after{content:'';position:absolute;width:12px;height:8px;border-bottom:2px solid #bf360c;border-radius:0 0 50% 50%}
.cat-mouth::before{left:-12px}
.cat-mouth::after{right:-12px}

/* Cat whiskers */
.whisker{position:absolute;width:35px;height:1.5px;background:#8d6e63;z-index:5;top:-18px}
.wh-l1{left:-15px;transform:rotate(-10deg)}.wh-l2{left:-18px;top:-12px;transform:rotate(5deg)}.wh-l3{left:-12px;top:-24px;transform:rotate(-20deg)}
.wh-r1{right:-15px;transform:rotate(10deg)}.wh-r2{right:-18px;top:-12px;transform:rotate(-5deg)}.wh-r3{right:-12px;top:-24px;transform:rotate(20deg)}

/* Cat tail */
.cat-tail{position:absolute;bottom:10px;right:-25px;width:50px;height:15px;background:#ffa726;border-radius:0 20px 20px 0;animation:tailWag 1.5s ease-in-out infinite;transform-origin:left center;z-index:0}
@keyframes tailWag{0%,100%{transform:rotate(-15deg)}50%{transform:rotate(15deg)}}

/* Cat paws */
.cat-paw{position:absolute;bottom:-8px;width:25px;height:15px;background:#ffb74d;border-radius:50%;z-index:1}
.paw-l{left:15px}.paw-r{right:15px}

/* Rose held by cat */
.cat-rose-held{position:absolute;bottom:30px;left:50%;transform:translateX(-50%);font-size:2.8rem;z-index:6;animation:roseGlow 2s ease-in-out infinite;filter:drop-shadow(0 0 8px rgba(255,100,150,.5))}
@keyframes roseGlow{0%,100%{filter:brightness(1) drop-shadow(0 0 6px rgba(255,100,150,.4));transform:translateX(-50%) scale(1) rotate(-3deg)}50%{filter:brightness(1.25) drop-shadow(0 0 16px rgba(255,100,150,.7));transform:translateX(-50%) scale(1.1) rotate(3deg)}}

/* Cheek blush */
.cat-blush{position:absolute;top:-20px;width:16px;height:10px;background:rgba(255,100,100,.35);border-radius:50%;z-index:5}
.blush-l{left:16%}.blush-r{right:16%}

.romantic-text{font-family:'Dancing Script',cursive;font-size:1.5rem;color:#6d1038;margin-top:14px;max-width:460px;line-height:1.75;animation:textFadeIn 1s ease .6s both;text-shadow:0 1px 4px rgba(0,0,0,.06);padding:0 12px}
@keyframes textFadeIn{0%{opacity:0;transform:translateY(18px)}100%{opacity:1;transform:translateY(0)}}

.p3-btn{margin-top:24px;animation:textFadeIn .8s ease 1.2s both}

/* ============================================================
   PAGE 4 â€“ LOVE LETTER ENVELOPE
   ============================================================ */
.envelope-scene{text-align:center;perspective:900px}

.envelope-outer{position:relative;display:inline-block;cursor:pointer;transition:transform .3s;animation:envelopeBreathe 3.5s ease-in-out infinite}
@keyframes envelopeBreathe{0%,100%{transform:scale(1) rotate(-.5deg)}50%{transform:scale(1.03) rotate(.5deg)}}
.envelope-outer:hover{transform:scale(1.06)}

.env-sparkle-border{position:absolute;inset:-10px;border-radius:16px;background:linear-gradient(60deg,#ffd700,#ff69b4,#ffd700,#ff69b4,#ffd700);background-size:300% 300%;animation:envBorderGlow 3s ease infinite;z-index:-1;filter:blur(12px);opacity:.6}
@keyframes envBorderGlow{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

.envelope{width:320px;height:220px;position:relative}

.env-body{width:100%;height:100%;background:linear-gradient(155deg,#fae8cd,#e8cfa0,#d4b07a);border-radius:12px;border:2px solid #c9a45c;box-shadow:0 12px 42px rgba(0,0,0,.25);position:relative;overflow:hidden}
.env-body::before{content:'';position:absolute;inset:0;background:repeating-linear-gradient(0deg,transparent 0px,transparent 24px,rgba(0,0,0,.03) 24px,rgba(0,0,0,.03) 25px);pointer-events:none}

.env-inner-v{position:absolute;bottom:0;left:0;width:100%;height:65%;background:linear-gradient(155deg,#f5e6cc,#ead5ab);clip-path:polygon(0 100%,50% 15%,100% 100%);z-index:1}

.env-stamp{position:absolute;top:14px;right:14px;width:54px;height:64px;background:#fff;border:3px dashed #c62828;border-radius:4px;display:flex;align-items:center;justify-content:center;font-size:1.8rem;z-index:5;transform:rotate(5deg);box-shadow:2px 3px 8px rgba(0,0,0,.12)}

.env-label{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-family:'Great Vibes',cursive;font-size:1.5rem;color:#7a5230;z-index:2;white-space:nowrap;text-shadow:0 1px 3px rgba(255,255,255,.4)}

.wax-seal{position:absolute;bottom:-18px;left:50%;transform:translateX(-50%);width:44px;height:44px;background:radial-gradient(circle at 38% 36%,#ef5350,#b71c1c);border-radius:50%;z-index:8;display:flex;align-items:center;justify-content:center;font-size:1.2rem;box-shadow:0 4px 14px rgba(0,0,0,.35);transition:opacity .6s,transform .6s}

.env-flap{position:absolute;top:0;left:0;width:100%;height:50%;background:linear-gradient(155deg,#eedbb4,#d4b47a);clip-path:polygon(0 0,50% 100%,100% 0);z-index:9;transform-origin:top center;transition:transform 1.1s cubic-bezier(.4,0,.2,1);border:2px solid #c9a45c;border-bottom:none}

.envelope-outer.opened .env-flap{transform:rotateX(180deg)}
.envelope-outer.opened .wax-seal{opacity:0;transform:translateX(-50%) scale(.2) rotate(90deg)}

.env-instruction{font-family:'Dancing Script',cursive;font-size:1.45rem;color:#880e4f;margin-top:34px;animation:pulseOpacity 1.8s ease-in-out infinite}
@keyframes pulseOpacity{0%,100%{opacity:1}50%{opacity:.35}}

/* Disney stars around envelope */
.env-star{position:absolute;font-size:1rem;animation:twinkle 1.5s ease-in-out infinite alternate;pointer-events:none;z-index:6}
@keyframes twinkle{0%{opacity:.2;transform:scale(.7)}100%{opacity:1;transform:scale(1.3)}}

/* ============================================================
   LETTER OVERLAY
   ============================================================ */
.letter-overlay{position:fixed;inset:0;background:rgba(0,0,0,0);z-index:100;display:flex;align-items:center;justify-content:center;pointer-events:none;transition:background .6s}
.letter-overlay.show{background:rgba(50,5,25,.6);pointer-events:auto}

.letter-card{width:92%;max-width:500px;max-height:88vh;overflow-y:auto;background:repeating-linear-gradient(transparent 0px,transparent 30px,rgba(210,180,150,.2) 30px,rgba(210,180,150,.2) 31px),linear-gradient(170deg,#fffef5,#fdf5e6,#faebd7);border:1px solid #d4a574;border-radius:8px;padding:40px 36px 36px;box-shadow:0 20px 65px rgba(0,0,0,.4);position:relative;transform:translateY(120vh) rotate(5deg);opacity:0;transition:transform 1s cubic-bezier(.34,1.56,.64,1),opacity .6s}
.letter-overlay.show .letter-card{transform:translateY(0) rotate(0);opacity:1}

/* Decorative corners */
.letter-card::before,.letter-card::after{content:'ğŸŒ¹';position:absolute;font-size:1.4rem;opacity:.6}
.letter-card::before{top:8px;left:10px}
.letter-card::after{bottom:8px;right:10px}

.letter-close{position:absolute;top:10px;right:16px;background:none;border:none;font-size:1.7rem;color:#c2185b;cursor:pointer;font-weight:bold;z-index:101;transition:transform .3s}
.letter-close:hover{transform:scale(1.3) rotate(90deg)}

.letter-head{font-family:'Great Vibes',cursive;font-size:1.8rem;color:#c2185b;text-align:center;margin-bottom:12px}
.letter-divider{text-align:center;font-size:1.2rem;margin:10px 0;opacity:.6}
.letter-body{font-family:'Dancing Script',cursive;font-size:1.2rem;color:#5d4037;line-height:2.1;text-align:left}
.letter-footer{font-family:'Dancing Script',cursive;font-size:1.25rem;color:#c2185b;text-align:right;margin-top:30px}
.letter-footer span{display:block;font-size:2rem;margin-top:8px}

/* Typewriter animation for letter */
.letter-body.typing span{opacity:0;animation:typeIn .04s ease forwards}
@keyframes typeIn{to{opacity:1}}

/* ============================================================
   CONFETTI
   ============================================================ */
.confetti-piece{position:fixed;top:-14px;pointer-events:none;z-index:200;animation:confettiFall linear forwards}
@keyframes confettiFall{0%{transform:translateY(0) rotate(0deg);opacity:1}100%{transform:translateY(108vh) rotate(900deg);opacity:0}}

/* ============================================================
   COUNTDOWN / LOVE METER
   ============================================================ */
.love-meter{position:fixed;bottom:18px;left:18px;z-index:50;background:rgba(255,255,255,.2);backdrop-filter:blur(8px);border-radius:20px;padding:8px 16px;font-family:'Dancing Script',cursive;color:#c2185b;font-size:.95rem;display:flex;align-items:center;gap:8px;box-shadow:0 3px 12px rgba(0,0,0,.1);border:1px solid rgba(255,200,220,.4);animation:meterPulse 3s ease-in-out infinite}
@keyframes meterPulse{0%,100%{border-color:rgba(255,200,220,.4)}50%{border-color:rgba(233,30,99,.5)}}
.love-meter .heart-icon{font-size:1.2rem;animation:heartBeat 1s ease-in-out infinite}
@keyframes heartBeat{0%,100%{transform:scale(1)}15%{transform:scale(1.3)}30%{transform:scale(1)}45%{transform:scale(1.15)}}

/* ============================================================
   MUSIC BUTTON
   ============================================================ */
.music-btn{position:fixed;bottom:18px;right:18px;width:52px;height:52px;border-radius:50%;background:linear-gradient(135deg,#e75480,#c2185b);border:2px solid rgba(255,255,255,.3);color:#fff;font-size:1.4rem;cursor:pointer;z-index:200;box-shadow:0 4px 18px rgba(0,0,0,.3);transition:.3s;display:flex;align-items:center;justify-content:center}
.music-btn:hover{transform:scale(1.12)}
.music-btn.playing{animation:musicDance 1s ease-in-out infinite}
@keyframes musicDance{0%,100%{transform:rotate(0deg) scale(1)}25%{transform:rotate(-8deg) scale(1.05)}75%{transform:rotate(8deg) scale(1.05)}}

/* ============================================================
   RESPONSIVE
   ============================================================ */
@media(max-width:600px){
  .board{padding:26px 20px 22px}
  .board h1{font-size:1.4rem}
  .gifts-row{gap:18px}
  .gift-wrap{width:105px;height:130px}
  .gift-bow{font-size:1.9rem}
  .gift-label{font-size:.72rem;bottom:-24px}
  .p2-title{font-size:1.9rem}
  .cat-container{transform:scale(.85);margin-bottom:0}
  .romantic-text{font-size:1.15rem}
  .envelope{width:255px;height:175px}
  .letter-card{padding:26px 16px 20px}
  .letter-body{font-size:1.05rem}
  .letter-head{font-size:1.45rem}
}
@media(max-width:360px){
  .board h1{font-size:1.2rem}
  .input-name{width:200px;font-size:.92rem}
  .gift-wrap{width:82px;height:108px}
  .p2-title{font-size:1.55rem}
}
</style>
</head>
<body>

<canvas id="particleCanvas"></canvas>
<div class="floating-layer" id="floatingLayer"></div>

<!-- Love Meter -->
<div class="love-meter" id="loveMeter">
  <span class="heart-icon">â¤ï¸</span>
  <span id="loveMeterText">Love Level: âˆ</span>
</div>

<!-- Music Button -->
<button class="music-btn" id="musicBtn" onclick="toggleMusic()" title="Play romantic music">ğŸµ</button>

<!-- ======================== PAGE 1 ======================== -->
<div class="page active" id="page1">
  <div class="glow-circle"></div>
  <div class="board" id="board">
    <div class="nail nail-tl"></div>
    <div class="nail nail-tr"></div>
    <div class="nail nail-bl"></div>
    <div class="nail nail-br"></div>
    <!-- Rose vine decorations -->
    <span class="board-vine" style="position:absolute;top:-8px;left:-12px;font-size:1.5rem;animation-delay:0s">ğŸŒ¿</span>
    <span class="board-vine" style="position:absolute;top:-8px;right:-12px;font-size:1.5rem;animation-delay:.5s">ğŸŒ¿</span>
    <span class="board-vine" style="position:absolute;bottom:-5px;left:20px;font-size:1.1rem;animation-delay:1s">ğŸŒ¸</span>
    <span class="board-vine" style="position:absolute;bottom:-5px;right:20px;font-size:1.1rem;animation-delay:1.5s">ğŸŒ¸</span>
    <h1>ğŸŒ¹ Happy Rose Day ğŸŒ¹</h1>
    <p class="sub">A little magic is waiting for youâ€¦</p>
    <input type="text" class="input-name" id="nameInput" placeholder="Enter your name ğŸ’–" maxlength="24" autocomplete="off">
    <br>
    <button class="btn-magic" onclick="goPage2()">Continue ğŸ’</button>
  </div>
</div>

<!-- ======================== PAGE 2 ======================== -->
<div class="page" id="page2">
  <div class="glow-circle"></div>
  <p class="p2-welcome" id="p2Welcome"></p>
  <h1 class="p2-title">âœ¨ Choose a Gift for You âœ¨</h1>
  <p class="p2-sub">Tap any gift box to unwrap your surprise ğŸ’˜</p>
  <div class="gifts-row">
    <!-- Gift 1 -->
    <div class="gift-wrap g-red" onclick="openGift(this,event)">
      <div class="gift-sparkles">
        <span style="top:5%;left:10%;animation-delay:0s">âœ¨</span>
        <span style="top:15%;right:5%;animation-delay:.4s">â­</span>
        <span style="bottom:20%;left:5%;animation-delay:.8s">âœ¨</span>
      </div>
      <span class="gift-bow">ğŸ€</span>
      <div class="gift-box-lid"></div>
      <div class="gift-ribbon-v"></div>
      <div class="gift-ribbon-h"></div>
      <div class="gift-box-body"></div>
      <span class="gift-label">Gift 1</span>
    </div>
    <!-- Gift 2 -->
    <div class="gift-wrap g-pink" onclick="openGift(this,event)">
      <div class="gift-sparkles">
        <span style="top:8%;left:8%;animation-delay:.2s">âœ¨</span>
        <span style="top:10%;right:8%;animation-delay:.6s">â­</span>
        <span style="bottom:15%;right:5%;animation-delay:1s">âœ¨</span>
      </div>
      <span class="gift-bow">ğŸ€</span>
      <div class="gift-box-lid"></div>
      <div class="gift-ribbon-v"></div>
      <div class="gift-ribbon-h"></div>
      <div class="gift-box-body"></div>
      <span class="gift-label">Gift 2</span>
    </div>
    <!-- Gift 3 -->
    <div class="gift-wrap g-purple" onclick="openGift(this,event)">
      <div class="gift-sparkles">
        <span style="top:3%;right:10%;animation-delay:.3s">âœ¨</span>
        <span style="bottom:25%;left:8%;animation-delay:.7s">â­</span>
        <span style="top:20%;left:5%;animation-delay:1.1s">âœ¨</span>
      </div>
      <span class="gift-bow">ğŸ€</span>
      <div class="gift-box-lid"></div>
      <div class="gift-ribbon-v"></div>
      <div class="gift-ribbon-h"></div>
      <div class="gift-box-body"></div>
      <span class="gift-label">Gift 3</span>
    </div>
  </div>
</div>

<!-- ======================== PAGE 3 ======================== -->
<div class="page" id="page3">
  <div class="cat-scene">
    <div class="cat-glow"></div>
    <div class="cat-container">
      <div class="cat-idle-wrap">
        <div class="cat-body">
          <!-- Head -->
          <div class="cat-head"></div>
          <!-- Ears -->
          <div class="cat-ear cat-ear-left"></div>
          <div class="cat-ear cat-ear-right"></div>
          <div class="cat-ear-inner cat-ear-inner-l"></div>
          <div class="cat-ear-inner cat-ear-inner-r"></div>
          <!-- Eyes -->
          <div class="cat-eyes">
            <div class="cat-eye"></div>
            <div class="cat-eye"></div>
          </div>
          <!-- Blush -->
          <div class="cat-blush blush-l"></div>
          <div class="cat-blush blush-r"></div>
          <!-- Nose -->
          <div class="cat-nose"></div>
          <!-- Mouth -->
          <div class="cat-mouth"></div>
          <!-- Whiskers -->
          <div class="whisker wh-l1"></div>
          <div class="whisker wh-l2"></div>
          <div class="whisker wh-l3"></div>
          <div class="whisker wh-r1"></div>
          <div class="whisker wh-r2"></div>
          <div class="whisker wh-r3"></div>
          <!-- Paws -->
          <div class="cat-paw paw-l"></div>
          <div class="cat-paw paw-r"></div>
          <!-- Tail -->
          <div class="cat-tail"></div>
          <!-- Rose -->
          <div class="cat-rose-held">ğŸŒ¹</div>
        </div>
      </div>
    </div>
    <p class="romantic-text" id="romanticMsg"></p>
    <button class="btn-magic p3-btn" onclick="goPage4()">Open Your Letter ğŸ’Œ</button>
  </div>
</div>

<!-- ======================== PAGE 4 ======================== -->
<div class="page" id="page4">
  <div class="envelope-scene">
    <div class="envelope-outer" id="envelopeOuter" onclick="handleEnvelope()">
      <div class="env-sparkle-border"></div>
      <!-- Disney stars -->
      <span class="env-star" style="top:-20px;left:-15px;animation-delay:0s">â­</span>
      <span class="env-star" style="top:-25px;right:-10px;animation-delay:.3s;font-size:.8rem">âœ¨</span>
      <span class="env-star" style="bottom:-15px;left:-20px;animation-delay:.6s;font-size:.9rem">ğŸ’«</span>
      <span class="env-star" style="bottom:-20px;right:-18px;animation-delay:.9s">â­</span>
      <span class="env-star" style="top:30%;left:-25px;animation-delay:1.2s;font-size:.75rem">âœ¨</span>
      <span class="env-star" style="top:40%;right:-22px;animation-delay:1.5s;font-size:.85rem">ğŸ’«</span>
      <div class="envelope">
        <div class="env-flap"></div>
        <div class="env-body">
          <div class="env-stamp">ğŸŒ¹</div>
          <div class="env-label">ğŸ’Œ For You, My Love</div>
        </div>
        <div class="env-inner-v"></div>
        <div class="wax-seal">â¤ï¸</div>
      </div>
    </div>
    <p class="env-instruction" id="envInstruction">âœ¨ Tap to open this ğŸ’• âœ¨</p>
  </div>
</div>

<!-- ======================== LETTER OVERLAY ======================== -->
<div class="letter-overlay" id="letterOverlay">
  <div class="letter-card">
    <button class="letter-close" onclick="closeLetter()">âœ•</button>
    <div class="letter-head">ğŸ’• My Dearest <span id="letterName"></span> ğŸ’•</div>
    <div class="letter-divider">ğŸŒ¹ â”€â”€â”€â”€â”€â”€â”€â”€ ğŸŒ¹ â”€â”€â”€â”€â”€â”€â”€â”€ ğŸŒ¹</div>
    <div class="letter-body" id="letterBody"></div>
    <div class="letter-divider">ğŸ’ â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ’ â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ’</div>
    <div class="letter-footer">
      With All My Love,<br>
      Forever & Always Yours ğŸ’
      <span>â¤ï¸ğŸŒ¹â¤ï¸</span>
    </div>
  </div>
</div>

<!-- ============================================================
     JAVASCRIPT
     ============================================================ -->
<script>
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   STATE
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
let userName = '';
let envelopeStep = 0;
let currentPage = 'page1';

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   NAVIGATION
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function showPage(id) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  currentPage = id;
  updateLoveMeter();
}

function updateLoveMeter() {
  const texts = {
    page1: 'Love Level: Loadingâ€¦ ğŸ’­',
    page2: 'Love Level: Rising! ğŸ’—',
    page3: 'Love Level: Overflowing! ğŸ’–',
    page4: 'Love Level: Infinite âˆ ğŸ’'
  };
  document.getElementById('loveMeterText').textContent = texts[currentPage] || 'Love Level: âˆ';
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   PAGE 1 â†’ PAGE 2
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function goPage2() {
  const inp = document.getElementById('nameInput');
  userName = inp.value.trim();
  if (!userName) {
    inp.classList.remove('shake');
    void inp.offsetWidth;
    inp.classList.add('shake');
    inp.focus();
    return;
  }
  document.getElementById('p2Welcome').textContent = `Hey ${userName}! ğŸ’•`;
  showPage('page2');
  spawnConfetti(55);
}

document.getElementById('nameInput').addEventListener('keydown', e => {
  if (e.key === 'Enter') goPage2();
});

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   PAGE 2 â†’ PAGE 3
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function openGift(el, evt) {
  const rect = el.getBoundingClientRect();
  createBurst(rect.left + rect.width / 2, rect.top + rect.height / 2);

  const msgs = [
    `This rose is for you, ${userName} ğŸ’–\nYou make my world brighter every single day.\nI'm so lucky to have you in my life.`,
    `${userName}, if I had a flower for every time\nyou made me smile, I'd have an endless garden ğŸŒ¹\nYou are my everything.`,
    `For the most beautiful soul I know â€” ${userName} ğŸ’•\nEvery heartbeat of mine whispers your name.\nYou are my forever.`
  ];
  document.getElementById('romanticMsg').textContent = msgs[Math.floor(Math.random() * msgs.length)];

  setTimeout(() => {
    showPage('page3');
    spawnConfetti(45);
  }, 500);
}

function createBurst(cx, cy) {
  const colors = ['#e91e63','#ffd54f','#ab47bc','#4fc3f7','#ff7043','#66bb6a','#ff80ab','#ea80fc'];
  for (let i = 0; i < 22; i++) {
    const dot = document.createElement('div');
    dot.className = 'burst';
    const angle = (Math.PI * 2 / 22) * i;
    const dist = 55 + Math.random() * 50;
    const tx = Math.cos(angle) * dist;
    const ty = Math.sin(angle) * dist;
    const size = 5 + Math.random() * 8;
    dot.style.cssText = `left:${cx}px;top:${cy}px;width:${size}px;height:${size}px;background:${colors[i % colors.length]};--burst-to:translate(${tx}px,${ty}px)`;
    document.body.appendChild(dot);
    setTimeout(() => dot.remove(), 800);
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   PAGE 3 â†’ PAGE 4
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function goPage4() {
  showPage('page4');
  envelopeStep = 0;
  document.getElementById('envelopeOuter').classList.remove('opened');
  document.getElementById('envInstruction').textContent = 'âœ¨ Tap to open this ğŸ’• âœ¨';
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   ENVELOPE + LETTER
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function handleEnvelope() {
  const outer = document.getElementById('envelopeOuter');
  const inst = document.getElementById('envInstruction');
  if (envelopeStep === 0) {
    outer.classList.add('opened');
    inst.textContent = 'âœ¨ Tap again to read the letter âœ¨';
    envelopeStep = 1;
  } else if (envelopeStep === 1) {
    openLetter();
    envelopeStep = 2;
  }
}

function openLetter() {
  document.getElementById('letterName').textContent = userName;
  
  const letterText = `My love ${userName},

You are the most beautiful part of my life. Every smile of yours makes my heart softer, every glance fills my world with warmth and colour.

On this Rose Day, I want you to know that my love for you blooms brighter with every passing heartbeat â€” like a rose that never wilts, my feelings for you are eternal and true.

You make my world brighter, my heart lighter, and my life infinitely more meaningful. I am so deeply grateful that you exist, and that you chose to share your beautiful days with me.

There aren't enough roses in the world to express how much you mean to me, but I'll spend forever trying.

Thank you for being my sunshine, my peace, and my home.

ğŸŒ¹ Happy Rose Day, my love! ğŸŒ¹

I love you endlessly â€” today, tomorrow, and in every lifetime after this.`;

  typewriterEffect(document.getElementById('letterBody'), letterText);
  document.getElementById('letterOverlay').classList.add('show');
  spawnConfetti(70);
}

function typewriterEffect(el, text) {
  el.innerHTML = '';
  let i = 0;
  const speed = 18;
  function type() {
    if (i < text.length) {
      if (text[i] === '\n') {
        el.innerHTML += '<br>';
      } else {
        const span = document.createElement('span');
        span.textContent = text[i];
        span.style.animation = `typeIn 0.03s ease forwards`;
        span.style.opacity = '0';
        el.appendChild(span);
      }
      i++;
      setTimeout(type, speed);
    }
  }
  type();
}

function closeLetter() {
  document.getElementById('letterOverlay').classList.remove('show');
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   CONFETTI
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function spawnConfetti(n) {
  const colors = ['#e91e63','#ff5722','#ffd54f','#4caf50','#2196f3','#ab47bc','#ff9800','#ec407a','#ff80ab','#ea80fc'];
  const shapes = ['circle','rect'];
  for (let i = 0; i < n; i++) {
    const c = document.createElement('div');
    c.className = 'confetti-piece';
    c.style.left = Math.random() * 100 + 'vw';
    c.style.background = colors[Math.floor(Math.random() * colors.length)];
    const size = 5 + Math.random() * 9;
    c.style.width = size + 'px';
    c.style.height = (shapes[Math.floor(Math.random() * 2)] === 'rect' ? size * 1.8 : size) + 'px';
    c.style.borderRadius = Math.random() > 0.5 ? '50%' : '2px';
    c.style.animationDuration = (2.2 + Math.random() * 2.8) + 's';
    c.style.animationDelay = (Math.random() * 0.9) + 's';
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 6000);
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   CURSOR TRAIL
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
(function initCursorTrail() {
  const emojis = ['â¤ï¸','ğŸ’•','âœ¨','ğŸ’–','ğŸŒ¹','ğŸ’—','ğŸ’'];
  let lastTime = 0;
  
  function spawnTrail(x, y) {
    const now = Date.now();
    if (now - lastTime < 80) return;
    lastTime = now;
    const el = document.createElement('div');
    el.className = 'cursor-heart';
    el.textContent = emojis[Math.floor(Math.random() * emojis.length)];
    el.style.left = (x - 8) + 'px';
    el.style.top = (y - 8) + 'px';
    el.style.fontSize = (0.6 + Math.random() * 0.6) + 'rem';
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 1100);
  }

  document.addEventListener('mousemove', e => spawnTrail(e.clientX, e.clientY));
  document.addEventListener('touchmove', e => {
    const t = e.touches[0];
    spawnTrail(t.clientX, t.clientY);
  }, { passive: true });
})();

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   FLOATING ELEMENTS
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
(function initFloaters() {
  const layer = document.getElementById('floatingLayer');
  const hearts = ['â¤ï¸','ğŸ’•','ğŸ’—','ğŸ’–','ğŸ’˜','ğŸ’','ğŸ’“','ğŸ©·'];
  const balloons = ['ğŸˆ','ğŸˆ','ğŸ©·','ğŸˆ'];
  const sparkles = ['âœ¨','â­','ğŸ’«','ğŸŒŸ'];
  const petals = ['ğŸŒ¸','ğŸµï¸','ğŸ’®'];

  function spawn() {
    // Heart
    if (Math.random() < 0.8) {
      const h = document.createElement('span');
      h.className = 'floater float-heart';
      h.textContent = hearts[Math.floor(Math.random() * hearts.length)];
      h.style.left = Math.random() * 100 + '%';
      h.style.bottom = '-40px';
      h.style.fontSize = (0.8 + Math.random() * 1.6) + 'rem';
      const dur = 8 + Math.random() * 8;
      h.style.animationDuration = dur + 's';
      layer.appendChild(h);
      setTimeout(() => h.remove(), dur * 1000 + 200);
    }

    // Balloon
    if (Math.random() < 0.3) {
      const b = document.createElement('span');
      b.className = 'floater float-balloon';
      b.textContent = balloons[Math.floor(Math.random() * balloons.length)];
      b.style.left = Math.random() * 100 + '%';
      b.style.bottom = '-50px';
      b.style.fontSize = (1.3 + Math.random() * 1.2) + 'rem';
      const dur = 10 + Math.random() * 8;
      b.style.animationDuration = dur + 's';
      layer.appendChild(b);
      setTimeout(() => b.remove(), dur * 1000 + 200);
    }

    // Sparkle
    if (Math.random() < 0.25) {
      const s = document.createElement('span');
      s.className = 'floater float-sparkle';
      s.textContent = sparkles[Math.floor(Math.random() * sparkles.length)];
      s.style.left = Math.random() * 100 + '%';
      s.style.top = Math.random() * 100 + '%';
      s.style.fontSize = (0.6 + Math.random() * 0.9) + 'rem';
      const dur = 2 + Math.random() * 2.5;
      s.style.animationDuration = dur + 's';
      layer.appendChild(s);
      setTimeout(() => s.remove(), dur * 1000 + 200);
    }

    // Petal
    if (Math.random() < 0.2) {
      const p = document.createElement('span');
      p.className = 'floater float-petal';
      p.textContent = petals[Math.floor(Math.random() * petals.length)];
      p.style.left = Math.random() * 100 + '%';
      p.style.bottom = '-30px';
      p.style.fontSize = (0.7 + Math.random() * 0.8) + 'rem';
      const dur = 9 + Math.random() * 7;
      p.style.animationDuration = dur + 's';
      layer.appendChild(p);
      setTimeout(() => p.remove(), dur * 1000 + 200);
    }
  }

  setInterval(spawn, 550);
  for (let i = 0; i < 15; i++) setTimeout(spawn, i * 100);
})();

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   PARTICLE CANVAS
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
(function initCanvas() {
  const cvs = document.getElementById('particleCanvas');
  const ctx = cvs.getContext('2d');
  let W, H;
  const particles = [];
  const COUNT = 55;

  function resize() {
    W = cvs.width = window.innerWidth;
    H = cvs.height = window.innerHeight;
  }
  window.addEventListener('resize', resize);
  resize();

  for (let i = 0; i < COUNT; i++) {
    particles.push({
      x: Math.random() * W,
      y: Math.random() * H,
      r: 1.2 + Math.random() * 3.5,
      dx: (Math.random() - 0.5) * 0.35,
      dy: -0.12 - Math.random() * 0.3,
      alpha: 0.12 + Math.random() * 0.4,
      hue: 320 + Math.random() * 50,
      pulse: Math.random() * Math.PI * 2,
      pulseSpeed: 0.02 + Math.random() * 0.03
    });
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);
    for (const p of particles) {
      p.x += p.dx;
      p.y += p.dy;
      p.pulse += p.pulseSpeed;
      if (p.y < -10) { p.y = H + 10; p.x = Math.random() * W; }
      if (p.x < -10) p.x = W + 10;
      if (p.x > W + 10) p.x = -10;

      const glow = Math.sin(p.pulse) * 0.15 + 0.85;
      const currentR = p.r * glow;
      const currentAlpha = p.alpha * glow;

      ctx.beginPath();
      ctx.arc(p.x, p.y, currentR, 0, Math.PI * 2);
      ctx.fillStyle = `hsla(${p.hue},80%,75%,${currentAlpha})`;
      ctx.shadowColor = `hsla(${p.hue},90%,70%,0.7)`;
      ctx.shadowBlur = 15;
      ctx.fill();
      ctx.shadowBlur = 0;
    }
    requestAnimationFrame(draw);
  }
  draw();
})();

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   MUSIC â€“ Romantic melody with Web Audio API
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
let audioCtx = null;
let musicPlaying = false;
let melodyInterval = null;
let chordInterval = null;

function toggleMusic() {
  const btn = document.getElementById('musicBtn');
  if (!musicPlaying) {
    if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    if (audioCtx.state === 'suspended') audioCtx.resume();
    startMusic();
    musicPlaying = true;
    btn.textContent = 'ğŸ”Š';
    btn.classList.add('playing');
  } else {
    stopMusic();
    musicPlaying = false;
    btn.textContent = 'ğŸµ';
    btn.classList.remove('playing');
  }
}

function playNote(freq, start, dur, type = 'sine', vol = 0.06) {
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.type = type;
  osc.frequency.value = freq;
  gain.gain.setValueAtTime(0, start);
  gain.gain.linearRampToValueAtTime(vol, start + 0.05);
  gain.gain.setValueAtTime(vol, start + dur * 0.7);
  gain.gain.exponentialRampToValueAtTime(0.001, start + dur);
  osc.connect(gain);
  gain.connect(audioCtx.destination);
  osc.start(start);
  osc.stop(start + dur);
}

function startMusic() {
  // A romantic melody in C major / A minor feel
  const melodyNotes = [
    523.25, 587.33, 659.25, 698.46, 659.25, 587.33, 523.25, 493.88,
    523.25, 659.25, 783.99, 698.46, 659.25, 587.33, 523.25, 587.33,
    659.25, 783.99, 880.00, 783.99, 698.46, 659.25, 587.33, 523.25,
    493.88, 523.25, 587.33, 659.25, 587.33, 523.25, 493.88, 523.25
  ];

  // Soft pad chords
  const chords = [
    [261.63, 329.63, 392.00],  // C
    [293.66, 349.23, 440.00],  // Dm
    [329.63, 392.00, 493.88],  // Em
    [349.23, 440.00, 523.25],  // F
    [261.63, 329.63, 392.00],  // C
    [220.00, 261.63, 329.63],  // Am
    [246.94, 311.13, 392.00],  // G/B
    [261.63, 329.63, 392.00],  // C
  ];

  let melIdx = 0;
  let chordIdx = 0;
  let beatCount = 0;

  function playNextMelody() {
    if (!musicPlaying) return;
    const now = audioCtx.currentTime;
    playNote(melodyNotes[melIdx], now, 0.48, 'sine', 0.055);
    // Add sparkle octave
    playNote(melodyNotes[melIdx] * 2, now, 0.3, 'sine', 0.015);
    melIdx = (melIdx + 1) % melodyNotes.length;
  }

  function playNextChord() {
    if (!musicPlaying) return;
    const now = audioCtx.currentTime;
    const chord = chords[chordIdx];
    chord.forEach(f => {
      playNote(f, now, 2.0, 'triangle', 0.02);
      // Low bass
      playNote(f / 2, now, 2.0, 'sine', 0.018);
    });
    chordIdx = (chordIdx + 1) % chords.length;
  }

  playNextMelody();
  playNextChord();
  melodyInterval = setInterval(playNextMelody, 480);
  chordInterval = setInterval(playNextChord, 1920);
}

function stopMusic() {
  clearInterval(melodyInterval);
  clearInterval(chordInterval);
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   INIT
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
updateLoveMeter();
document.getElementById('nameInput').focus();
</script>
</body>
</html>
